import{d as E,r as i,o as L,c as A,b as a,g as e,t as r,k as p,f as k,v,F as g,e as h,n as B,h as n}from"./index-CLsOCDdy.js";import{a as w}from"./api-mlpREBDB.js";import"./index-B9ygI19o.js";const F={class:"h-[calc(100vh-64px)] flex flex-col"},U={class:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},$={class:"flex items-center gap-3"},I=["disabled"],M=["disabled"],z={class:"flex-1 flex overflow-hidden"},q={key:0,class:"flex-1 bg-gray-900 p-4 overflow-hidden flex flex-col"},Q={class:"flex justify-between items-center mb-2 text-gray-400 text-sm"},T={key:0,class:"text-red-400"},W={class:"w-80 bg-gray-50 border-r border-gray-200 flex flex-col"},G={class:"p-4 border-b border-gray-200"},H={class:"flex-1 overflow-y-auto p-4 space-y-6"},K={class:"space-y-2"},R=["onClick"],X={class:"font-medium text-sm"},Y={class:"text-xs text-gray-500 truncate"},Z={class:"space-y-2"},ee=["onClick"],te={class:"flex items-center justify-between"},se={class:"font-medium text-sm"},oe={class:"flex-1 bg-gray-100 p-8 overflow-y-auto"},le={class:"max-w-3xl mx-auto space-y-6"},ae={class:"bg-white rounded-lg shadow p-6"},ne={class:"grid grid-cols-2 gap-4"},re={class:"col-span-2"},ie={class:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500"},de={key:0,class:"text-gray-900 font-medium"},ue={key:1,class:"text-gray-400 italic"},ce={class:"space-y-4"},pe={key:0,class:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg"},ve={class:"font-medium"},me={class:"text-xs text-gray-500 uppercase"},fe=["onClick"],we=E({__name:"Builder",setup(ye){const b=i({orchestrators:[],agents:[]}),o=i({name:"New Plan",version:"0.1.0",description:"",orchestrator:"",workflows:[],customComponents:[],settings:{}}),x=i(""),m=i(!1),f=i(!1),d=i(!1),u=i(""),c=i("");L(async()=>{await S()});async function S(){try{const{data:s}=await w.get("/plans/components");b.value=s}catch(s){console.error("Failed to load components:",s)}}const _=A(()=>{const s=x.value.toLowerCase();return{orchestrators:b.value.orchestrators.filter(t=>t.name.toLowerCase().includes(s)),agents:b.value.agents.filter(t=>t.name.toLowerCase().includes(s))}});function N(s){o.value.orchestrator=s.name}function J(s){o.value.customComponents.push({type:"agent",path:s.path})}function O(s){o.value.customComponents.splice(s,1)}function P(){if(d.value)try{const s=JSON.parse(u.value);o.value=s,d.value=!1,c.value=""}catch(s){c.value="Invalid JSON: "+s.message}else u.value=JSON.stringify(o.value,null,2),d.value=!0}function V(){try{JSON.parse(u.value),c.value=""}catch(s){c.value=s.message}}async function j(){if(d.value)try{o.value=JSON.parse(u.value)}catch{alert("Cannot save: Invalid JSON");return}m.value=!0;try{const{data:s}=await w.post("/plans",o.value);o.value=s,d.value&&(u.value=JSON.stringify(o.value,null,2)),alert("Plan saved successfully!")}catch{alert("Failed to save plan")}finally{m.value=!1}}async function D(){if(!o.value.id)return;const s=prompt("Enter target directory path for deployment:");if(s){f.value=!0;try{await w.post(`/plans/${o.value.id}/deploy`,{targetDir:s}),alert(`Plan deployed to ${s}`)}catch{alert("Failed to deploy plan")}finally{f.value=!1}}}return(s,t)=>(n(),a("div",F,[e("div",U,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Visual Agent Builder"),e("p",{class:"text-sm text-gray-500"},"Compose complex agents from modular components.")],-1)),e("div",$,[e("button",{onClick:P,class:"btn btn-ghost text-sm"},r(d.value?"ðŸ‘ï¸ Visual Editor":"{} JSON Editor"),1),e("button",{onClick:j,class:"btn btn-primary",disabled:m.value},r(m.value?"Saving...":"ðŸ’¾ Save Plan"),9,I),e("button",{onClick:D,class:"btn btn-secondary",disabled:f.value||!o.value.id},r(f.value?"Deploying...":"ðŸš€ Deploy"),9,M)])]),e("div",z,[d.value?(n(),a("div",q,[e("div",Q,[t[6]||(t[6]=e("span",null,"Edit Plan Configuration (JSON)",-1)),c.value?(n(),a("span",T,r(c.value),1)):k("",!0)]),p(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),class:"flex-1 w-full bg-gray-800 text-green-400 font-mono p-4 rounded border border-gray-700 focus:border-green-500 focus:ring-1 focus:ring-green-500 outline-none resize-none",spellcheck:"false",onInput:V},null,544),[[v,u.value]])])):(n(),a(g,{key:1},[e("div",W,[e("div",G,[t[7]||(t[7]=e("h2",{class:"font-bold text-gray-700"},"Component Library",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>x.value=l),type:"text",placeholder:"Search components...",class:"input w-full mt-2 text-sm"},null,512),[[v,x.value]])]),e("div",H,[e("div",null,[t[8]||(t[8]=e("h3",{class:"text-xs font-bold text-gray-500 uppercase mb-2"},"Orchestrators",-1)),e("div",K,[(n(!0),a(g,null,h(_.value.orchestrators,l=>(n(),a("div",{key:l.name,class:B(["bg-white p-3 rounded border border-gray-200 cursor-pointer hover:border-primary-500 hover:shadow-sm transition-all",{"ring-2 ring-primary-500":o.value.orchestrator===l.name}]),onClick:y=>N(l)},[e("div",X,r(l.name),1),e("div",Y,r(l.path),1)],10,R))),128))])]),e("div",null,[t[10]||(t[10]=e("h3",{class:"text-xs font-bold text-gray-500 uppercase mb-2"},"Agents",-1)),e("div",Z,[(n(!0),a(g,null,h(_.value.agents,l=>(n(),a("div",{key:l.name,class:"bg-white p-3 rounded border border-gray-200 cursor-pointer hover:border-primary-500 hover:shadow-sm transition-all",onClick:y=>J(l)},[e("div",te,[e("span",se,r(l.name),1),t[9]||(t[9]=e("span",{class:"text-xs text-gray-400"},"+ Add",-1))])],8,ee))),128))])])])]),e("div",oe,[e("div",le,[e("div",ae,[t[14]||(t[14]=e("h3",{class:"text-lg font-bold mb-4"},"Plan Settings",-1)),e("div",ne,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium mb-1"},"Plan Name",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.name=l),type:"text",class:"input w-full"},null,512),[[v,o.value.name]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium mb-1"},"Version",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.version=l),type:"text",class:"input w-full"},null,512),[[v,o.value.version]])]),e("div",re,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium mb-1"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.description=l),class:"input w-full",rows:"2"},null,512),[[v,o.value.description]])])])]),e("div",ie,[t[15]||(t[15]=e("div",{class:"flex items-center justify-between mb-2"},[e("h3",{class:"text-lg font-bold text-purple-700"},"Orchestrator"),e("span",{class:"badge badge-purple"},"Core Logic")],-1)),o.value.orchestrator?(n(),a("div",de,r(o.value.orchestrator),1)):(n(),a("div",ue," Select an orchestrator from the library... "))]),e("div",ce,[t[17]||(t[17]=e("h3",{class:"text-lg font-bold text-gray-700"},"Workflows & Agents",-1)),o.value.customComponents.length===0?(n(),a("div",pe,[...t[16]||(t[16]=[e("p",{class:"text-gray-500"},"No components added yet.",-1),e("p",{class:"text-sm text-gray-400"},"Click items in the sidebar to add them.",-1)])])):k("",!0),(n(!0),a(g,null,h(o.value.customComponents,(l,y)=>{var C;return n(),a("div",{key:y,class:"bg-white rounded-lg shadow p-4 flex items-center justify-between border-l-4 border-blue-500"},[e("div",null,[e("div",ve,r((C=l.path.split("/").pop())==null?void 0:C.replace(".md","")),1),e("div",me,r(l.type),1)]),e("button",{onClick:ge=>O(y),class:"text-red-500 hover:text-red-700"}," âœ• ",8,fe)])}),128))])])])],64))])]))}});export{we as default};
