import{d as F,r as c,c as U,b as n,e,F as C,h as S,t as r,n as M,i as a,o as j,f as R,l as B,g as V,B as O,p as L,v as T,I as P,G as A,J as W,j as E,x as I,E as G}from"./index-CulLQ6wY.js";import{u as q}from"./sessions-YxWAsAt5.js";import{u as z}from"./components-ClCEhk3t.js";import{a as N}from"./api-mlpREBDB.js";import"./client-wxXmKtvP.js";import"./index-B9ygI19o.js";const H={class:"space-y-3"},J={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},K=["onClick"],Q={class:"flex items-start gap-3"},X={class:"text-2xl"},Y={class:"flex-1 min-w-0"},Z={class:"font-semibold text-gray-900 dark:text-white text-sm"},ee={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},te={class:"flex gap-2 mt-2"},se={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"},oe={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},ae=F({__name:"CouncilPatternSelector",props:{modelValue:{}},emits:["update:modelValue"],setup(w,{emit:h}){const _=[{id:"adaptive-router",name:"Adaptive Router",icon:"ðŸ§­",description:"Auto-selects optimal pattern",speed:"Variable",speedClass:"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300",rounds:"Auto",bestFor:"Best for: General purpose entry point when unsure which pattern to use."},{id:"ceo-council",name:"CEO Council",icon:"ðŸ›ï¸",description:"Deep multi-agent deliberation",speed:"Slow",speedClass:"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300",rounds:"5",bestFor:"Best for: Complex strategic decisions, architectural planning, nuanced writing."},{id:"playoff-debate",name:"Playoff Debate",icon:"âš”ï¸",description:"Tournament-style elimination",speed:"Medium",speedClass:"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",rounds:"3",bestFor:"Best for: Choosing between options, tech stack selection, binary decisions."},{id:"rcr-critique",name:"RCR Protocol",icon:"ðŸ”„",description:"Reflect â†’ Critique â†’ Refine",speed:"Medium",speedClass:"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300",rounds:"3-4",bestFor:"Best for: Code review, debugging, editing, polishing content."},{id:"research-deep-dive",name:"Research Deep Dive",icon:"ðŸ”¬",description:"Parallel exhaustive search",speed:"Slow",speedClass:"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300",rounds:"4",bestFor:'Best for: Comprehensive research, finding obscure info, "tell me everything".'}],f=w,o=h,m=c(f.modelValue||""),b=U(()=>_.find(l=>l.id===m.value)),v=l=>{m.value=l,o("update:modelValue",l)};return(l,s)=>{var g;return a(),n("div",H,[s[0]||(s[0]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Council Pattern ",-1)),e("div",J,[(a(),n(C,null,S(_,d=>e("div",{key:d.id,onClick:u=>v(d.id),class:M(["cursor-pointer rounded-lg border-2 p-4 transition-all duration-200",m.value===d.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-400 dark:hover:border-gray-500"])},[e("div",Q,[e("span",X,r(d.icon),1),e("div",Y,[e("h4",Z,r(d.name),1),e("p",ee,r(d.description),1),e("div",te,[e("span",{class:M(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",d.speedClass])},r(d.speed),3),e("span",se,r(d.rounds)+" rounds ",1)])])])],10,K)),64))]),e("p",oe,r(((g=b.value)==null?void 0:g.bestFor)||"Select a council pattern for orchestrated reasoning."),1)])}}}),re={class:"space-y-3"},le={class:"flex items-center justify-between"},ne={class:"flex items-center gap-2"},de={class:"text-xs text-gray-500 dark:text-gray-400"},ie=["disabled"],ce={key:0,class:"space-y-3"},ue=["value"],me={key:0,class:"grid grid-cols-2 gap-2"},pe=["onClick"],be={class:"font-medium text-sm text-gray-900 dark:text-white"},ge={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},xe={class:"flex flex-wrap gap-1 mt-2"},ve={key:1,class:"bg-amber-50 dark:bg-amber-900/30 rounded-lg p-3 border border-amber-200 dark:border-amber-700"},ye=F({__name:"LocalModelSelector",props:{modelValue:{}},emits:["update:modelValue","model-config"],setup(w,{emit:h}){const _=w,f=h,o=c({available:!1,models:[],error:""}),m=c([]),b=c(_.modelValue||""),v=c(!1),l=c(!1),s=c({}),g=async()=>{v.value=!0;try{const i=await N.get("/local-models/status");o.value=i.data,m.value=i.data.models||[]}catch{o.value={available:!1,models:[],error:"Failed to connect"}}finally{v.value=!1}},d=async()=>{try{const i=await N.get("/local-models/recommended");s.value=i.data.models||{}}catch(i){console.warn("Failed to load recommendations:",i)}},u=i=>i.replace(/-mlx-4bit$/,"").replace(/-instruct$/,"").split("/").pop()||i,$=()=>{f("update:modelValue",b.value)},D=i=>{b.value=i.id,f("update:modelValue",i.id),f("model-config",i)};return j(()=>{g(),d()}),(i,x)=>(a(),n("div",re,[e("div",le,[x[2]||(x[2]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[R(" Local Model "),e("span",{class:"text-xs text-gray-400"},"(LM Studio)")],-1)),e("div",ne,[e("span",{class:M(["w-2 h-2 rounded-full",o.value.available?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),e("span",de,r(o.value.available?"Connected":"Disconnected"),1),e("button",{onClick:g,class:"text-xs text-blue-500 hover:text-blue-600",disabled:v.value}," â†» ",8,ie)])]),o.value.available?(a(),n("div",ce,[B(e("select",{"onUpdate:modelValue":x[0]||(x[0]=p=>b.value=p),onChange:$,class:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[x[3]||(x[3]=e("option",{value:""},"Select a model...",-1)),(a(!0),n(C,null,S(m.value,p=>(a(),n("option",{key:p.id,value:p.id},r(u(p.id)),9,ue))),128))],544),[[O,b.value]]),l.value?(a(),n("div",me,[(a(!0),n(C,null,S(s.value,(p,k)=>(a(),n("div",{key:k,onClick:t=>D(p),class:"cursor-pointer p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500 transition-colors"},[e("h5",be,r(p.name),1),e("p",ge,r(p.description),1),e("div",xe,[(a(!0),n(C,null,S(p.bestFor,t=>(a(),n("span",{key:t,class:"px-1.5 py-0.5 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"},r(t),1))),128))])],8,pe))),128))])):V("",!0),e("button",{onClick:x[1]||(x[1]=p=>l.value=!l.value),class:"text-xs text-blue-500 hover:text-blue-600"},r(l.value?"Hide recommendations":"Show recommended models"),1)])):(a(),n("div",ve,[...x[4]||(x[4]=[e("p",{class:"text-sm text-amber-700 dark:text-amber-300"},[e("span",{class:"mr-1"},"âš ï¸"),R(" LM Studio not detected. Start LM Studio and ensure it's running on port 1234. ")],-1)])]))]))}}),fe={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ke={class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"},_e={class:"mb-6 border-b border-gray-200 dark:border-gray-700 pb-6"},he={class:"mb-4"},we={key:0,class:"mt-3 pl-4 border-l-2 border-blue-200 dark:border-blue-700"},$e={class:"mb-4"},Ce={class:"mb-4"},Se={class:"flex items-center gap-2 cursor-pointer"},Ve={class:"mb-6"},Me={class:"flex items-center gap-2 cursor-pointer"},Be={class:"flex justify-end gap-3"},Re=["disabled"],Fe=F({__name:"StartSessionModal",props:{workflowId:{}},emits:["close","started"],setup(w,{emit:h}){const _=w,f=h,o=q(),m=z(),b=A(),v=c(""),l=c(""),s=c(""),g=c(!0),d=c(!1),u=c(!1),$=c(!1),D=U(()=>m.componentsByCategory.orchestrator||[]),i=c(null),x=k=>{i.value=k};j(async()=>{D.value.length===0&&await m.fetchComponents({category:"orchestrator"})});async function p(){u.value=!0;try{const k=await o.createSession(_.workflowId,v.value||void 0,s.value,g.value,d.value?"e2b":"local");f("started",k.id),b.push(`/sessions/${k.id}`)}catch{alert("Failed to start session")}finally{u.value=!1}}return(k,t)=>(a(),n("div",fe,[e("div",ke,[t[13]||(t[13]=e("h3",{class:"text-xl font-bold mb-4 text-gray-900 dark:text-white"},"Start New Session",-1)),e("div",_e,[L(ae,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=y=>v.value=y)},null,8,["modelValue"])]),e("div",he,[e("button",{onClick:t[1]||(t[1]=y=>$.value=!$.value),class:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600"},[e("span",null,r($.value?"â–¼":"â–¶"),1),t[7]||(t[7]=R(" Local Model Options (LM Studio) ",-1))]),$.value?(a(),n("div",we,[L(ye,{modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=y=>l.value=y),onModelConfig:x},null,8,["modelValue"])])):V("",!0)]),e("div",$e,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Initial Prompt (Optional)",-1)),B(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=y=>s.value=y),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",placeholder:"Describe the task for the agent..."},null,512),[[T,s.value]])]),e("div",Ce,[e("label",Se,[B(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=y=>g.value=y),class:"checkbox checkbox-primary"},null,512),[[P,g.value]]),t[9]||(t[9]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Enable Context Injection (Auto-RAG)",-1))]),t[10]||(t[10]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6"}," Automatically search project history and inject relevant context into the agent's initial prompt. ",-1))]),e("div",Ve,[e("label",Me,[B(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=y=>d.value=y),class:"checkbox checkbox-secondary"},null,512),[[P,d.value]]),t[11]||(t[11]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Run in E2B Sandbox",-1))]),t[12]||(t[12]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6"}," Execute the agent in a secure, isolated cloud environment. ",-1))]),e("div",Be,[e("button",{onClick:t[6]||(t[6]=y=>k.$emit("close")),class:"btn btn-secondary"},"Cancel"),e("button",{onClick:p,disabled:u.value,class:"btn btn-primary"},r(u.value?"Starting...":"Start Session"),9,Re)])])]))}}),De={class:"container mx-auto px-4 py-8"},Le={key:0,class:"max-w-4xl mx-auto"},je={class:"mb-6"},Pe={class:"card mb-6"},Ee={class:"flex items-start justify-between mb-4"},Ie={class:"text-3xl font-bold"},Ne={class:"text-gray-500 mt-1"},Ue={class:"flex items-center gap-3"},Ae={class:"grid grid-cols-2 gap-4 text-sm"},Oe={class:"ml-2"},Te={key:0},We={class:"ml-2"},Ge={class:"card"},qe={key:0,class:"space-y-2"},ze={class:"flex items-center justify-between"},He={class:"font-medium"},Je={class:"text-sm text-gray-500"},Ke={key:1,class:"text-gray-500 text-center py-8"},st=F({__name:"WorkflowDetail",setup(w){const h=W();A();const _=useWorkflowsStore();useSessionsStore();const f=useComponentsStore(),o=c(null),m=c(!1);j(async()=>{const l=h.params.id;await Promise.all([_.getWorkflow(l).then(s=>o.value=s),f.fetchComponents({category:"orchestrator"})])});function b(l){return new Date(l).toLocaleString()}function v(l){return{completed:"badge-success",active:"badge-info",pending:"badge-warning",failed:"badge-error"}[l]||"badge-info"}return(l,s)=>{var d;const g=G("router-link");return a(),n("div",De,[o.value?(a(),n("div",Le,[e("div",je,[L(g,{to:"/workflows",class:"text-primary-600 hover:text-primary-700 text-sm"},{default:I(()=>[...s[2]||(s[2]=[R(" â† Back to Workflows ",-1)])]),_:1})]),e("div",Pe,[e("div",Ee,[e("div",null,[e("h1",Ie,r(o.value.name),1),e("p",Ne,"Template: "+r(o.value.template_id),1)]),e("div",Ue,[e("span",{class:M(["badge",o.value.status==="active"?"badge-success":"badge-info"])},r(o.value.status),3),e("button",{onClick:s[0]||(s[0]=u=>m.value=!0),class:"btn btn-primary btn-sm"}," â–¶ Start Session ")])]),e("div",Ae,[e("div",null,[s[3]||(s[3]=e("span",{class:"text-gray-500"},"Created:",-1)),e("span",Oe,r(b(o.value.created_at)),1)]),o.value.updated_at?(a(),n("div",Te,[s[4]||(s[4]=e("span",{class:"text-gray-500"},"Updated:",-1)),e("span",We,r(b(o.value.updated_at)),1)])):V("",!0)])]),e("div",Ge,[s[5]||(s[5]=e("h2",{class:"text-xl font-bold mb-4"},"Recent Sessions",-1)),((d=o.value.recent_sessions)==null?void 0:d.length)>0?(a(),n("div",qe,[(a(!0),n(C,null,S(o.value.recent_sessions,u=>(a(),E(g,{key:u.id,to:`/sessions/${u.id}`,class:"block p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},{default:I(()=>[e("div",ze,[e("div",null,[e("div",He,"Session "+r(u.id.slice(0,8)),1),e("div",Je," Started: "+r(b(u.started_at)),1)]),e("span",{class:M(["badge",v(u.status)])},r(u.status),3)])]),_:2},1032,["to"]))),128))])):(a(),n("div",Ke," No sessions yet "))])])):V("",!0),m.value?(a(),E(Fe,{key:1,"workflow-id":o.value.id,onClose:s[1]||(s[1]=u=>m.value=!1)},null,8,["workflow-id"])):V("",!0)])}}});export{st as default};
