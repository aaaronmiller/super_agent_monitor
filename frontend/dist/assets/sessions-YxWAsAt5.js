import{H,r as d}from"./index-CulLQ6wY.js";import{a as o}from"./client-wxXmKtvP.js";const q=H("sessions",()=>{const h=d([]),i=d(!1),n=d(null);async function u(a){var s,e,t;i.value=!0,n.value=null;try{const{data:r}=await o.get("/sessions",{params:a});return h.value=r.sessions,r.sessions}catch(r){throw n.value=((t=(e=(s=r.response)==null?void 0:s.data)==null?void 0:e.error)==null?void 0:t.message)||"Failed to fetch sessions",r}finally{i.value=!1}}async function w(a){var s,e,t;try{const{data:r}=await o.get(`/sessions/${a}`);return r.session}catch(r){throw n.value=((t=(e=(s=r.response)==null?void 0:s.data)==null?void 0:e.error)==null?void 0:t.message)||"Failed to fetch session",r}}async function p(a){try{const{data:s}=await o.get(`/sessions/${a}/metrics`);return s.metrics}catch(s){throw s}}async function v(a,s){try{const{data:e}=await o.get(`/sessions/${a}/events`,{params:s});return e}catch(e){throw e}}async function g(a,s,e,t,r){var c,y,f;i.value=!0;try{const{data:l}=await o.post("/sessions",{workflowId:a,orchestratorId:s,initialPrompt:e,contextInjection:t,runtime:r});return await u(),l.session}catch(l){throw n.value=((f=(y=(c=l.response)==null?void 0:c.data)==null?void 0:y.error)==null?void 0:f.message)||"Failed to create session",l}finally{i.value=!1}}async function S(a,s){var e,t,r;i.value=!0;try{const{data:c}=await o.patch(`/sessions/${a}`,s);return await u(),c.session}catch(c){throw n.value=((r=(t=(e=c.response)==null?void 0:e.data)==null?void 0:t.error)==null?void 0:r.message)||"Failed to update session",c}finally{i.value=!1}}async function m(a){var s,e,t;i.value=!0;try{await o.delete(`/sessions/${a}`),await u()}catch(r){throw n.value=((t=(e=(s=r.response)==null?void 0:s.data)==null?void 0:e.error)==null?void 0:t.message)||"Failed to delete session",r}finally{i.value=!1}}async function $(a){var s,e;try{const{data:t}=await o.post(`/sessions/${a}/start`);return t}catch(t){throw n.value=((e=(s=t.response)==null?void 0:s.data)==null?void 0:e.error)||"Failed to start session",t}}async function F(a){var s,e;try{const{data:t}=await o.post(`/sessions/${a}/stop`);return t}catch(t){throw n.value=((e=(s=t.response)==null?void 0:s.data)==null?void 0:e.error)||"Failed to stop session",t}}async function k(a){var s,e;try{const{data:t}=await o.post(`/sessions/${a}/restart`);return t}catch(t){throw n.value=((e=(s=t.response)==null?void 0:s.data)==null?void 0:e.error)||"Failed to restart session",t}}async function M(a){var s,e;try{const{data:t}=await o.post(`/sessions/${a}/kick`);return t}catch(t){throw n.value=((e=(s=t.response)==null?void 0:s.data)==null?void 0:e.error)||"Failed to kick session",t}}async function x(a){try{const{data:s}=await o.get(`/sessions/${a}/status`);return s}catch(s){throw s}}async function E(){try{const{data:a}=await o.get("/sessions/monitor/stats");return a}catch(a){throw a}}return{sessions:h,loading:i,error:n,fetchSessions:u,getSession:w,getSessionMetrics:p,getSessionEvents:v,createSession:g,updateSession:S,deleteSession:m,startSession:$,stopSession:F,restartSession:k,kickSession:M,getSessionStatus:x,getMonitorStats:E}});export{q as u};
