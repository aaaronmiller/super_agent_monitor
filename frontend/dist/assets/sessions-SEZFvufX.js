import{G,r as d}from"./index-CLsOCDdy.js";import{a as n}from"./client-wxXmKtvP.js";const q=G("sessions",()=>{const h=d([]),c=d(!1),o=d(null);async function u(r){var t,e,s;c.value=!0,o.value=null;try{const{data:a}=await n.get("/sessions",{params:r});return h.value=a.sessions,a.sessions}catch(a){throw o.value=((s=(e=(t=a.response)==null?void 0:t.data)==null?void 0:e.error)==null?void 0:s.message)||"Failed to fetch sessions",a}finally{c.value=!1}}async function w(r){var t,e,s;try{const{data:a}=await n.get(`/sessions/${r}`);return a.session}catch(a){throw o.value=((s=(e=(t=a.response)==null?void 0:t.data)==null?void 0:e.error)==null?void 0:s.message)||"Failed to fetch session",a}}async function p(r){var t,e,s;try{const{data:a}=await n.get(`/sessions/${r}/metrics`);return a.metrics}catch(a){throw o.value=((s=(e=(t=a.response)==null?void 0:t.data)==null?void 0:e.error)==null?void 0:s.message)||"Failed to fetch metrics",a}}async function v(r,t){var e,s,a;try{const{data:i}=await n.get(`/sessions/${r}/events`,{params:t});return i}catch(i){throw o.value=((a=(s=(e=i.response)==null?void 0:e.data)==null?void 0:s.error)==null?void 0:a.message)||"Failed to fetch events",i}}async function g(r,t,e,s,a){var i,f,y;c.value=!0;try{const{data:l}=await n.post("/sessions",{workflowId:r,orchestratorId:t,initialPrompt:e,contextInjection:s,runtime:a});return await u(),l.session}catch(l){throw o.value=((y=(f=(i=l.response)==null?void 0:i.data)==null?void 0:f.error)==null?void 0:y.message)||"Failed to create session",l}finally{c.value=!1}}async function S(r,t){var e,s,a;c.value=!0;try{const{data:i}=await n.patch(`/sessions/${r}`,t);return await u(),i.session}catch(i){throw o.value=((a=(s=(e=i.response)==null?void 0:e.data)==null?void 0:s.error)==null?void 0:a.message)||"Failed to update session",i}finally{c.value=!1}}async function m(r){var t,e,s;c.value=!0;try{await n.delete(`/sessions/${r}`),await u()}catch(a){throw o.value=((s=(e=(t=a.response)==null?void 0:t.data)==null?void 0:e.error)==null?void 0:s.message)||"Failed to delete session",a}finally{c.value=!1}}async function F(r){var t,e;try{const{data:s}=await n.post(`/sessions/${r}/start`);return s}catch(s){throw o.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.error)||"Failed to start session",s}}async function $(r){var t,e;try{const{data:s}=await n.post(`/sessions/${r}/stop`);return s}catch(s){throw o.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.error)||"Failed to stop session",s}}async function k(r){var t,e;try{const{data:s}=await n.post(`/sessions/${r}/restart`);return s}catch(s){throw o.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.error)||"Failed to restart session",s}}async function M(r){var t,e;try{const{data:s}=await n.post(`/sessions/${r}/kick`);return s}catch(s){throw o.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.error)||"Failed to kick session",s}}async function x(r){var t,e,s;try{const{data:a}=await n.get(`/sessions/${r}/status`);return a}catch(a){throw o.value=((s=(e=(t=a.response)==null?void 0:t.data)==null?void 0:e.error)==null?void 0:s.message)||"Failed to fetch session status",a}}async function E(){try{const{data:r}=await n.get("/sessions/monitor/stats");return r}catch(r){throw r}}return{sessions:h,loading:c,error:o,fetchSessions:u,getSession:w,getSessionMetrics:p,getSessionEvents:v,createSession:g,updateSession:S,deleteSession:m,startSession:F,stopSession:$,restartSession:k,kickSession:M,getSessionStatus:x,getMonitorStats:E}});export{q as u};
