import{G as g,r as c}from"./index-CLsOCDdy.js";import{a as n}from"./client-wxXmKtvP.js";const F=g("workflows",()=>{const u=c([]),i=c([]),s=c(!1),l=c(null);async function d(){var r,a,t;s.value=!0,l.value=null;try{const{data:e}=await n.get("/workflows");return i.value=e.workflows,e.workflows}catch(e){throw l.value=((t=(a=(r=e.response)==null?void 0:r.data)==null?void 0:a.error)==null?void 0:t.message)||"Failed to fetch templates",e}finally{s.value=!1}}async function f(){var r,a,t;s.value=!0,l.value=null;try{const{data:e}=await n.get("/workflows/instances/list");return u.value=e.instances,e.instances}catch(e){throw l.value=((t=(a=(r=e.response)==null?void 0:r.data)==null?void 0:a.error)==null?void 0:t.message)||"Failed to fetch workflows",e}finally{s.value=!1}}async function k(r){var a,t,e;try{const{data:o}=await n.get(`/workflows/instances/${r}`);return o.instance}catch(o){throw l.value=((e=(t=(a=o.response)==null?void 0:a.data)==null?void 0:t.error)==null?void 0:e.message)||"Failed to fetch workflow",o}}async function v(r,a){var t,e,o;s.value=!0;try{const{data:w}=await n.post("/workflows/instances",{templateId:r,name:a});return await f(),w.instance}catch(w){throw l.value=((o=(e=(t=w.response)==null?void 0:t.data)==null?void 0:e.error)==null?void 0:o.message)||"Failed to create workflow",w}finally{s.value=!1}}async function h(r){var a,t,e;s.value=!0;try{await n.delete(`/workflows/instances/${r}`),await f()}catch(o){throw l.value=((e=(t=(a=o.response)==null?void 0:a.data)==null?void 0:t.error)==null?void 0:e.message)||"Failed to delete workflow",o}finally{s.value=!1}}async function y(r){try{const{data:a}=await n.post(`/workflows/${r}/validate`);return a}catch(a){throw a}}async function p(r){var a,t,e;s.value=!0;try{const{data:o}=await n.post(`/workflows/${r}/generate`);return o}catch(o){throw l.value=((e=(t=(a=o.response)==null?void 0:a.data)==null?void 0:t.error)==null?void 0:e.message)||"Failed to generate workflow",o}finally{s.value=!1}}return{workflows:u,templates:i,loading:s,error:l,fetchTemplates:d,fetchWorkflows:f,getWorkflow:k,createWorkflow:v,deleteWorkflow:h,validateWorkflow:y,generateWorkflow:p}});export{F as u};
