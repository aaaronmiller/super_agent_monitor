# ===========================================
# Super Agent Monitor - Environment Configuration
# ===========================================

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# PostgreSQL connection string
# Format: postgresql://[user[:password]@][host][:port][/dbname]
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/super_agent_monitor

# For production, use connection pooling:
# DATABASE_URL=postgresql://user:password@host:5432/dbname?sslmode=require&pool_min=2&pool_max=10

# ===========================================
# API KEYS
# ===========================================

# OpenAI API key for RAG embeddings (REQUIRED)
# Get your key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# ===========================================
# SERVER CONFIGURATION
# ===========================================

# Server port for backend API
PORT=3001

# Node environment (development, production, test)
NODE_ENV=development

# ===========================================
# EMBEDDING CONFIGURATION
# ===========================================

# OpenAI embedding model
# Options: text-embedding-3-small, text-embedding-3-large, text-embedding-ada-002
# Recommendation: text-embedding-3-small (cost-effective, 1536 dimensions)
EMBEDDING_MODEL=text-embedding-3-small

# OpenAI API base URL (optional - for custom endpoints or proxies)
# OPENAI_API_BASE_URL=https://api.openai.com/v1

# ===========================================
# SESSION MONITOR CONFIGURATION
# ===========================================

# Number of seconds of inactivity before a session is considered stalled
# Default: 300 (5 minutes)
STALL_DETECTION_SECONDS=300

# How often to check for stalled sessions (in seconds)
# Default: 60 (1 minute)
MONITOR_CHECK_INTERVAL_SECONDS=60

# Maximum number of auto-restart attempts before marking session as failed
# Default: 3
MAX_SESSION_RETRIES=3

# ===========================================
# WEBSOCKET CONFIGURATION
# ===========================================

# WebSocket endpoint path
# Default: /ws
WS_PATH=/ws

# ===========================================
# CLAUDE CODE CONFIGURATION
# ===========================================

# Path to Claude Code CLI (optional - defaults to 'claude' in PATH)
# CLAUDE_CLI_PATH=/usr/local/bin/claude

# Default model for Claude Code sessions
# Options: claude-sonnet-4, claude-opus-4, claude-haiku-4
# DEFAULT_MODEL=claude-sonnet-4

# Default temperature for Claude Code sessions (0.0 - 1.0)
# DEFAULT_TEMPERATURE=0.7

# Default max tokens for Claude Code sessions
# DEFAULT_MAX_TOKENS=100000

# ===========================================
# WORKFLOW CONFIGURATION
# ===========================================

# Directory where .claude workflow folders are generated
# Default: ./backend/.workflows
# WORKFLOW_OUTPUT_DIR=./backend/.workflows

# Workflow cleanup retention period (in days)
# Workflows older than this are eligible for cleanup
# Default: 30
# WORKFLOW_RETENTION_DAYS=30

# Workflow cleanup size threshold (in GB)
# Trigger cleanup when total workflow storage exceeds this
# Default: 1
# WORKFLOW_SIZE_THRESHOLD_GB=1

# ===========================================
# MEMORY CONFIGURATION
# ===========================================

# Memory retention period (in days)
# Low-importance memories older than this may be pruned
# Default: 30
# MEMORY_RETENTION_DAYS=30

# Minimum importance score to retain during cleanup (0.0 - 1.0)
# Memories below this score may be pruned after retention period
# Default: 0.3
# MEMORY_MIN_IMPORTANCE=0.3

# Maximum embedding cache size (number of cached embeddings)
# Default: 1000
# EMBEDDING_CACHE_SIZE=1000

# ===========================================
# LOGGING CONFIGURATION
# ===========================================

# Log level (error, warn, info, debug)
# Default: info
# LOG_LEVEL=info

# Log format (json, pretty)
# Default: pretty
# LOG_FORMAT=pretty

# ===========================================
# CORS CONFIGURATION
# ===========================================

# Allowed origins for CORS (comma-separated)
# Default: http://localhost:3000
# For production, set to your frontend domain
# CORS_ORIGIN=http://localhost:3000,https://yourdomain.com

# ===========================================
# DOCKER CONFIGURATION
# ===========================================

# PostgreSQL configuration for Docker Compose
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=super_agent_monitor

# Ports for Docker services
POSTGRES_PORT=5432
BACKEND_PORT=3001
FRONTEND_PORT=3000

# ===========================================
# NOTES
# ===========================================

# 1. Copy this file to .env before running the application
# 2. Never commit .env to version control (.gitignore should exclude it)
# 3. Generate secure random values for secrets in production
# 4. Use environment-specific .env files (.env.development, .env.production)
# 5. For production deployment, consider using a secrets management service

# ===========================================
# QUICK SETUP CHECKLIST
# ===========================================

# ✅ Set DATABASE_URL to your PostgreSQL connection string
# ✅ Set OPENAI_API_KEY for RAG embeddings
# ✅ Update NODE_ENV to 'production' for production deployments
# ✅ Configure CORS_ORIGIN for your frontend domain
# ✅ Adjust STALL_DETECTION_SECONDS based on your workflow patterns
# ✅ Set appropriate MEMORY_RETENTION_DAYS for your use case
